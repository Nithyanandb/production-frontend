import{r as e,j as s,m as t,R as a,i as l,X as i,Y as c,T as r,k as n,l as o,o as d,p as x,q as m,t as h,B as u,v as p,H as j,D as b,w as f,x as g,G as y,y as N,z as v}from"./index-CF6TildN.js";import{A as w}from"./AreaChart-D1EhQu4K.js";import"./react-BAR5trb5.js";import"./vendor-Cqa_4s5f.js";const k=(e,s=.005)=>e+e*s*(Math.random()-.5),S=({symbol:o,onTimeframeChange:d})=>{const[x,m]=e.useState("1D"),h=((e,s=100)=>{const t=[],a={"1D":24,"1W":168,"1M":30,"3M":90,"1Y":252,"5Y":1260}[e]||24;let l=s;const i=new Date;for(let c=0;c<a;c++){const s=new Date(i);"1D"===e||"1W"===e?s.setHours(s.getHours()-c):s.setDate(s.getDate()-c),l=k(l),t.unshift({date:s.toISOString(),price:Number(l.toFixed(2))})}return t})(x,{AAPL:150,MSFT:380,GOOGL:140,TSLA:250,NVDA:800}[o]||100),u=h[h.length-1].price-h[0].price,p=(u/h[0].price*100).toFixed(2);return s.jsxs(t.div,{initial:{opacity:0,y:0},animate:{opacity:1,y:0},className:"relative h-[400px] bg-black/40 backdrop-blur-xl rounded-2xl p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-medium text-white",children:o}),s.jsxs("div",{className:"text-sm "+(u>=0?"text-green-400":"text-red-400"),children:[u>=0?"+":"",p,"%"]})]}),s.jsx("div",{className:"flex gap-2",children:["1D","1W","1M","3M","1Y","5Y"].map((e=>s.jsx("button",{onClick:()=>(e=>{m(e),null==d||d(e)})(e),className:"px-3 py-1 rounded-full text-sm transition-all "+(x===e?"bg-white/10 text-white":"text-white/60 hover:text-white"),children:e},e)))})]}),s.jsx(a,{width:"100%",height:"100%",style:{position:"sticky",top:0},children:s.jsxs(w,{data:h,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"colorPrice",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#60A5FA",stopOpacity:.3}),s.jsx("stop",{offset:"95%",stopColor:"#60A5FA",stopOpacity:0})]})}),s.jsx(l,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)",vertical:!1}),s.jsx(i,{dataKey:"date",tickFormatter:e=>{const s=new Date(e);return"1D"===x?s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):s.toLocaleDateString([],{day:"numeric",month:"short"})},stroke:"rgba(255,255,255,0.5)",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12}}),s.jsx(c,{domain:["auto","auto"],stroke:"rgba(255,255,255,0.5)",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},tickFormatter:e=>`$${e}`}),s.jsx(r,{contentStyle:{backgroundColor:"rgba(0,0,0,0.9)",border:"none",backdropFilter:"blur(10px)",padding:"12px",borderRadius:"8px"},labelFormatter:e=>new Date(e).toLocaleString()}),s.jsx(n,{className:"fixed",type:"monotone",dataKey:"price",stroke:"#60A5FA",fill:"url(#colorPrice)",strokeWidth:2})]})})]},o)},F=({stock:a,onBuyClick:l,loading:i})=>{const[c,r]=e.useState("1D"),[n,p]=e.useState(new Date),[j,b]=e.useState([]),[f,g]=e.useState(!1);if(e.useEffect((()=>{(async()=>{if(null==a?void 0:a.symbol){g(!0);try{const e=await fetch(`https://finnhub.io/api/v1/stock/recommendation?symbol=${a.symbol}&token=ctre6q9r01qhb16mmh70ctre6q9r01qhb16mmh7g`),s=await e.json();b(s)}catch(e){console.error("Failed to fetch recommendation trends:",e)}finally{g(!1)}}})()}),[null==a?void 0:a.symbol]),e.useEffect((()=>{const e=setInterval((()=>{p(new Date)}),1e3);return()=>clearInterval(e)}),[]),i||!a)return null;const y="#16a34a",N="#4ade80",v="#facc15",w="#f87171",k="#dc2626";return s.jsx(o,{mode:"wait",children:s.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col h-full bg-black/40 backdrop-blur-xl p-4 lg:p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold text-white",children:a.name}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-white/60",children:a.symbol}),s.jsx("span",{className:"text-white/60",children:"•"}),s.jsx("span",{className:"text-white/60",children:n.toLocaleTimeString()})]})]})}),s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsxs("span",{className:"text-4xl font-medium",children:["$",a.price.toFixed(2)]}),s.jsxs(t.span,{animate:{color:a.change>=0?"rgb(34, 197, 94)":"rgb(239, 68, 68)"},className:"flex items-center text-lg",children:[(a.change||0)>=0?s.jsx(d,{size:20}):s.jsx(x,{size:20}),Math.abs(a.change||0).toFixed(2),"%"]})]}),s.jsx("div",{className:"flex gap-1 mb-4 overflow-x-auto scrollbar-hide",children:["1D","1W","1M","3M","1Y","ALL"].map((e=>s.jsx("button",{onClick:()=>r(e),className:"px-3 py-1 rounded-full text-xs font-medium transition-all whitespace-nowrap "+(c===e?"bg-white text-black":"bg-white/10 text-white/60 hover:bg-white/20"),children:e},e)))}),s.jsx("div",{className:"flex-1 bg-black/20 rounded-xl p-4 backdrop-blur-sm mb-4",children:s.jsx("div",{className:"h-full",children:s.jsx(S,{stock:a,timeFrame:c})})}),s.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[{icon:s.jsx(m,{size:16}),label:"Volume",value:(a.change||0).toLocaleString()},{icon:s.jsx(h,{size:16}),label:"High",value:`₹${(a.high||0).toFixed(2)}`},{icon:s.jsx(u,{size:16}),label:"Low",value:`₹${(a.low||0).toFixed(2)}`}].map(((e,t)=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center gap-1 text-white/60 mb-1 text-xs",children:[e.icon,s.jsx("span",{className:"font-medium",children:e.label})]}),s.jsx("p",{className:"text-lg font-medium truncate",children:e.value})]},t)))}),s.jsxs("div",{className:"bg-black/20 rounded-xl p-4 backdrop-blur-sm",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recommendation Trends"}),f?s.jsx("div",{className:"flex justify-center items-center py-4",children:s.jsx("span",{className:"text-white/60",children:"Loading trends..."})}):j.length>0?s.jsx("div",{className:"space-y-4",children:j.map(((e,t)=>s.jsxs("div",{className:"bg-white/5 rounded-xl p-3",children:[s.jsxs("p",{className:"text-sm text-white/60 mb-2",children:["Period: ",e.period]}),s.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-white/60",children:"Strong Buy"}),s.jsx("p",{className:"text-lg font-medium",style:{color:y},children:e.strongBuy})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-white/60",children:"Buy"}),s.jsx("p",{className:"text-lg font-medium",style:{color:N},children:e.buy})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-white/60",children:"Hold"}),s.jsx("p",{className:"text-lg font-medium",style:{color:v},children:e.hold})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-white/60",children:"Sell"}),s.jsx("p",{className:"text-lg font-medium",style:{color:w},children:e.sell})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs text-white/60",children:"Strong Sell"}),s.jsx("p",{className:"text-lg font-medium",style:{color:k},children:e.strongSell})]})]})]},t)))}):s.jsx("div",{className:"flex justify-center items-center py-4",children:s.jsx("span",{className:"text-white/60",children:"No recommendation trends available."})})]})]})})},D=()=>{const[a,l]=e.useState(p),[i,c]=e.useState(!0),[r,n]=e.useState(null),[m,h]=e.useState(""),[u,w]=e.useState(null),[k,S]=e.useState(null),[D,C]=e.useState({}),[z,L]=e.useState(!1),[A,M]=e.useState(!1);e.useEffect((()=>{c(!0);const e=setTimeout((()=>{l(p),c(!1)}),4e3);return()=>clearTimeout(e)}),[]),e.useEffect((()=>{const e=setInterval((()=>{l((e=>e.map((e=>{const s=2*(Math.random()-.5),t=(e.price||100)+s;return C((t=>({...t,[e.symbol]:s}))),{...e,price:t,change:s,changePercent:s/(e.price||100)*100}}))))}),5e3);return()=>clearInterval(e)}),[]);const T=a.filter((e=>e.symbol.toLowerCase().includes(m.toLowerCase())||e.name.toLowerCase().includes(m.toLowerCase())));return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 to-black text-white",children:[s.jsx(j,{}),s.jsx("div",{children:s.jsx("div",{className:"mt-32 absolute flex z-20 px-8 justify-end w-full",children:k&&s.jsxs("button",{onClick:()=>w(k),className:"px-8 py-3 bg-white text-black font-medium rounded-full hover:bg-white/90 transition-all flex items-center gap-2",children:[s.jsx(b,{size:20}),"Buy ",k.symbol]})})}),s.jsxs("div",{className:"flex h-screen pt-20",children:[s.jsx("div",{className:"w-98 bg-black/30 border-r border-white/10 overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"relative mb-6",children:[s.jsx(f,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/40",size:20}),s.jsx("input",{type:"text",placeholder:"Search stocks...",value:m,onChange:e=>h(e.target.value),className:"w-full bg-white/5 border border-white/10 rounded-2xl pl-12 pr-4 py-3 text-base focus:outline-none focus:ring-2 focus:ring-white/20"})]}),s.jsx("div",{className:"space-y-4 overflow-y-auto w-[400px] h-[calc(100vh-200px)]",children:i?s.jsx(g,{}):T.map((e=>s.jsx(t.div,{layout:!0,className:"p-4 rounded-xl cursor-pointer transition-all "+((null==k?void 0:k.symbol)===e.symbol?"bg-white/10":"bg-black/20 hover:bg-white/5"),onClick:()=>(async e=>{L(!0),S(e);try{const s={...e};S(s)}catch(s){console.error("Failed to load stock details:",s),n("Failed to load stock details")}finally{L(!1)}})(e),children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:e.symbol}),s.jsx("p",{className:"text-sm text-white/60",children:e.name})]}),s.jsxs(t.div,{animate:{color:(e.changePercent||0)>=0?"#16a34a":"#dc2626"},className:"text-right",children:[s.jsxs("p",{className:"font-medium",children:["₹",(e.price||0).toFixed(2)]}),s.jsx("p",{className:"text-sm flex items-center gap-1",children:void 0!==e.changePercent&&s.jsxs(s.Fragment,{children:[e.changePercent>=0?s.jsx(d,{size:12}):s.jsx(x,{size:12}),Math.abs(e.changePercent).toFixed(2),"%"]})})]})]})},e.symbol)))})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:z?s.jsx(g,{}):k?s.jsx(F,{stock:k,onBuyClick:w,loading:i}):s.jsx("div",{className:"h-full flex items-center justify-center text-white/60",children:s.jsxs("div",{className:"text-center",children:[s.jsx(y,{size:48,className:"mx-auto mb-4 opacity-60"}),s.jsx("p",{className:"text-xl",children:"Select a stock to view details"})]})})})]}),s.jsx(o,{children:A&&s.jsx(t.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed bottom-8 right-8 z-50",children:s.jsxs("div",{className:"bg-green-500 text-white px-6 py-4 rounded-xl shadow-xl flex items-center gap-3",children:[s.jsx("div",{className:"bg-white/20 rounded-full p-1",children:s.jsx(N,{className:"w-4 h-4"})}),s.jsx("span",{children:"Transaction completed successfully!"})]})})}),u&&s.jsx(v,{stock:u,onClose:()=>w(null),onSuccess:()=>{M(!0),setTimeout((()=>{M(!1)}),3e3)}})]})};export{D as BuyStocks,D as default};
//# sourceMappingURL=BuyStocks-ChEOm2G8.js.map
