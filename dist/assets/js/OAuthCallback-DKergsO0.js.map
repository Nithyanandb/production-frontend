{"version":3,"file":"OAuthCallback-DKergsO0.js","sources":["../../../src/components/Auth/OAuthCallback.tsx"],"sourcesContent":["import { useEffect } from 'react';\r\nimport  useAuth  from '../hooks/useAuth';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport const OAuthCallback = () => {\r\n  const navigate = useNavigate();\r\n  const { handleOAuthCallback } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const processAuth = async () => {\r\n      try {\r\n        const params = new URLSearchParams(window.location.search);\r\n        const token = params.get('token');\r\n        const auth_success = params.get('auth_success') === 'true';\r\n\r\n        if (auth_success && token) {\r\n          // Create user data from URL parameters\r\n          const userData = {\r\n            token,\r\n            user: {\r\n              email: params.get('email') || '',\r\n              name: params.get('name') || '',\r\n              provider: params.get('provider') || '',\r\n              roles: params.get('roles')?.split(',') || []\r\n            }\r\n          };\r\n\r\n          if (!userData.user.email || !userData.user.name) {\r\n            throw new Error('Missing required user data');\r\n          }\r\n\r\n          if (window.opener) {\r\n            window.opener.postMessage({\r\n              type: 'AUTH_SUCCESS',\r\n              data: userData\r\n            }, window.location.origin);\r\n            setTimeout(() => window.close(), 100);\r\n          } else {\r\n            handleOAuthCallback(userData);\r\n            navigate('/');\r\n          }\r\n        } else {\r\n          throw new Error(params.get('message') || 'Authentication failed');\r\n        }\r\n      } catch (error) {\r\n        const errorMessage = error instanceof Error ? error.message : 'Authentication failed';\r\n        if (window.opener) {\r\n          window.opener.postMessage({\r\n            type: 'AUTH_ERROR',\r\n            error: errorMessage\r\n          }, window.location.origin);\r\n          window.close();\r\n        } else {\r\n          navigate(`/login?error=${encodeURIComponent(errorMessage)}`);\r\n        }\r\n      }\r\n    };\r\n\r\n    processAuth();\r\n  }, [navigate, handleOAuthCallback]);\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 flex items-center justify-center bg-gray-900\">\r\n      <div className=\"text-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4\" />\r\n        <h3 className=\"text-xl font-semibold text-white\">Processing authentication...</h3>\r\n        <p className=\"text-gray-400 mt-2\">Please wait while we complete the process...</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OAuthCallback;"],"names":["OAuthCallback","navigate","useNavigate","handleOAuthCallback","useAuth","useEffect","async","params","URLSearchParams","window","location","search","token","get","Error","userData","user","email","name","provider","roles","_a","split","opener","postMessage","type","data","origin","setTimeout","close","error","errorMessage","message","encodeURIComponent","processAuth","className","children","jsxs","jsx"],"mappings":"sHAIO,MAAMA,EAAgB,KAC3B,MAAMC,EAAWC,KACXC,oBAAEA,GAAwBC,IAuDhC,OArDAC,EAAAA,WAAU,KACYC,iBACd,IACF,MAAMC,EAAS,IAAIC,gBAAgBC,OAAOC,SAASC,QAC7CC,EAAQL,EAAOM,IAAI,SAGzB,KAFoD,SAA/BN,EAAOM,IAAI,mBAEZD,EA2BlB,MAAM,IAAIE,MAAMP,EAAOM,IAAI,YAAc,yBA3BhB,CAEzB,MAAME,EAAW,CACfH,QACAI,KAAM,CACJC,MAAOV,EAAOM,IAAI,UAAY,GAC9BK,KAAMX,EAAOM,IAAI,SAAW,GAC5BM,SAAUZ,EAAOM,IAAI,aAAe,GACpCO,OAAO,OAAAC,IAAOR,IAAI,eAAU,EAAAQ,EAAAC,MAAM,OAAQ,KAI9C,IAAKP,EAASC,KAAKC,QAAUF,EAASC,KAAKE,KACnC,MAAA,IAAIJ,MAAM,8BAGdL,OAAOc,QACTd,OAAOc,OAAOC,YAAY,CACxBC,KAAM,eACNC,KAAMX,GACLN,OAAOC,SAASiB,QACnBC,YAAW,IAAMnB,OAAOoB,SAAS,OAEjC1B,EAAoBY,GACpBd,EAAS,KACX,QAIK6B,GACP,MAAMC,EAAeD,aAAiBhB,MAAQgB,EAAME,QAAU,wBAC1DvB,OAAOc,QACTd,OAAOc,OAAOC,YAAY,CACxBC,KAAM,aACNK,MAAOC,GACNtB,OAAOC,SAASiB,QACnBlB,OAAOoB,SAEP5B,EAAS,gBAAgBgC,mBAAmBF,KAC9C,GAIQG,EAAA,GACX,CAACjC,EAAUE,UAGX,MAAI,CAAAgC,UAAU,6DACbC,SAACC,EAAAA,KAAA,MAAA,CAAIF,UAAU,cACbC,SAAA,GAACE,IAAA,MAAA,CAAIH,UAAU,2FACdG,EAAAA,IAAA,KAAA,CAAGH,UAAU,mCAAmCC,SAA4B,iCAC5EE,EAAAA,IAAA,IAAA,CAAEH,UAAU,qBAAqBC,SAA4C,qDAElF"}