import{j as e,m as t,r as s,E as a,w as i,z as c,l,y as n,H as r,C as x,v as o}from"./index-CF6TildN.js";import"./react-BAR5trb5.js";import"./vendor-Cqa_4s5f.js";const d=({segments:s,selectedSegment:a,onSegmentChange:i})=>e.jsx("div",{className:"flex items-center gap-2 mb-8 overflow-x-auto scrollbar-hide",children:s.map((s=>e.jsx(t.button,{onClick:()=>i(s),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 rounded-lg text-sm font-medium transition-all \n            "+(a===s?"bg-white text-black":"text-gray-400 hover:text-white"),children:s},s)))}),m=({holdings:r})=>{const[x,o]=s.useState(r),[d,m]=s.useState(!1),[h,p]=s.useState(null),[u,y]=s.useState(null),[j,g]=s.useState(!1),[N,w]=s.useState("");s.useEffect((()=>{r.length>0&&(async()=>{m(!0);try{const e=await Promise.all(r.map((async e=>{const t=await fetch(`https://finnhub.io/api/v1/quote?symbol=${e.symbol}&token=ctre6q9r01qhb16mmh70ctre6q9r01qhb16mmh7g`),s=await t.json();return{...e,currentPrice:s.c,change:s.d,changePercent:s.dp,highPrice:s.h,lowPrice:s.l,openPrice:s.o,previousClose:s.pc}})));o(e)}catch(e){p("Failed to fetch stock data. Please try again later.")}finally{m(!1)}})()}),[r]);const f=x.filter((e=>e.symbol.toLowerCase().includes(N.toLowerCase())||e.name&&e.name.toLowerCase().includes(N.toLowerCase())));return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(a,{className:"w-8 h-8 animate-spin text-gray-400"})}):h?e.jsx("div",{className:"text-center py-4 text-red-500",children:h}):x&&0!==x.length?e.jsxs("div",{className:"overflow-x-auto custom-scrollbar",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx(i,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search holdings...",value:N,onChange:e=>w(e.target.value),className:"w-full bg-white/5 border border-white/10 rounded-2xl pl-12 pr-4 py-3 text-base focus:outline-none focus:ring-2 focus:ring-white/20 text-white"})]}),e.jsxs("table",{className:"min-w-full bg-black text-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Symbol"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Current Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Change"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Change %"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"High Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Low Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Open Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Previous Close"})]})}),e.jsx("tbody",{children:f.map((t=>e.jsxs("tr",{className:"border-b border-white/10 hover:bg-white/5 cursor-pointer",onClick:()=>y(t),children:[e.jsx("td",{className:"px-6 py-4 font-medium",children:t.symbol}),e.jsx("td",{className:"px-6 py-4 text-gray-300",children:t.name??"N/A"}),e.jsx("td",{className:"px-6 py-4",children:t.quantity}),e.jsx("td",{className:"px-6 py-4",children:void 0===t.currentPrice?e.jsx(a,{className:"w-4 h-4 animate-spin"}):`$${t.currentPrice.toFixed(2)}`}),e.jsx("td",{className:"px-6 py-4 "+((t.change??0)>=0?"text-green-500":"text-red-500"),children:void 0===t.change?e.jsx(a,{className:"w-4 h-4 animate-spin"}):`$${t.change.toFixed(2)}`}),e.jsx("td",{className:"px-6 py-4 "+((t.changePercent??0)>=0?"text-green-500":"text-red-500"),children:void 0===t.changePercent?e.jsx(a,{className:"w-4 h-4 animate-spin"}):`${t.changePercent.toFixed(2)}%`}),e.jsx("td",{className:"px-6 py-4",children:void 0===t.highPrice?e.jsx(a,{className:"w-4 h-4 animate-spin"}):`$${t.highPrice.toFixed(2)}`}),e.jsx("td",{className:"px-6 py-4",children:void 0===t.lowPrice?e.jsx(a,{className:"w-4 h-4 animate-spin"}):`$${t.lowPrice.toFixed(2)}`}),e.jsx("td",{className:"px-6 py-4",children:void 0===t.openPrice?e.jsx(a,{className:"w-4 h-4 animate-spin"}):`$${t.openPrice.toFixed(2)}`}),e.jsx("td",{className:"px-6 py-4",children:void 0===t.previousClose?e.jsx(a,{className:"w-4 h-4 animate-spin"}):`$${t.previousClose.toFixed(2)}`})]},t.symbol)))})]}),u&&e.jsx(c,{stock:{symbol:u.symbol,name:u.name||u.symbol,price:u.currentPrice||0},onClose:()=>y(null),onBuy:async e=>{try{const t=await fetch("https://production-backend-final.onrender.com/transaction/buy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to process transaction")}g(!0),setTimeout((()=>{g(!1)}),3e3),console.log("Transaction completed successfully!")}catch(t){p("Transaction failed. Please try again."),console.error("Transaction failed:",t)}},onSuccess:()=>{g(!0),setTimeout((()=>{g(!1)}),3e3)}}),e.jsx(l,{children:j&&e.jsx(t.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed bottom-8 right-8 z-50",children:e.jsxs("div",{className:"bg-green-500 text-white px-6 py-4 rounded-xl shadow-xl flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-1",children:e.jsx(n,{className:"w-4 h-4"})}),e.jsx("span",{children:"Transaction completed successfully!"})]})})})]}):e.jsx("div",{className:"text-center py-4 text-gray-400",children:"No holdings available."})},h=["ALL","TECHNOLOGY","FINANCE","HEALTHCARE","ENERGY","CONSUMER"],p=()=>{s.useState("");const[a,i]=s.useState("ALL"),[c,n]=s.useState(null),[p,u]=s.useState({}),[y,j]=s.useState(!1);s.useEffect((()=>{(async()=>{j(!0);try{const e={};for(const t of o){const s=await fetch(`https://finnhub.io/api/v1/stock/metric?symbol=${t.symbol}&metric=all&token=ctre6q9r01qhb16mmh70ctre6q9r01qhb16mmh7g`),a=await s.json();e[t.symbol]=a}u(e)}catch(e){console.error("Failed to fetch financials:",e)}finally{j(!1)}})()}),[]);const g=c?p[c.symbol]:null;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 to-black text-white",children:[e.jsx(r,{}),e.jsxs("div",{className:"flex h-screen pt-20",children:[e.jsxs("div",{className:" p-8 space-y-4 overflow-y-auto w-[400px] h-[calc(100vh-200px)]",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Basic Financials"}),y?e.jsx("div",{className:"flex justify-center items-center py-4",children:e.jsx("span",{className:"text-white/60",children:"Loading financials..."})}):g?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Key Metrics"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-white/60",children:["52-Week High: ",e.jsx("span",{className:"text-white",children:g.metric["52WeekHigh"]})]}),e.jsxs("p",{className:"text-sm text-white/60",children:["52-Week Low: ",e.jsx("span",{className:"text-white",children:g.metric["52WeekLow"]})]}),e.jsxs("p",{className:"text-sm text-white/60",children:["Beta: ",e.jsx("span",{className:"text-white",children:g.metric.beta})]}),e.jsxs("p",{className:"text-sm text-white/60",children:["PE Ratio: ",e.jsx("span",{className:"text-white",children:g.metric.peAnnual})]}),e.jsxs("p",{className:"text-sm text-white/60",children:["Net Margin: ",e.jsx("span",{className:"text-white",children:g.metric.netMarginAnnual})]})]})]}),e.jsxs("div",{className:"bg-white/5 rounded-xl p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Annual Ratios"}),e.jsxs("div",{className:"space-y-2",children:[g.series.annual.currentRatio.map(((t,s)=>e.jsxs("p",{className:"text-sm text-white/60",children:["Current Ratio (",t.period,"): ",e.jsx("span",{className:"text-white",children:t.v})]},s))),g.series.annual.salesPerShare.map(((t,s)=>e.jsxs("p",{className:"text-sm text-white/60",children:["Sales Per Share (",t.period,"): ",e.jsx("span",{className:"text-white",children:t.v})]},s)))]})]})]}):e.jsx("div",{className:"flex justify-center items-center py-4",children:e.jsx("span",{className:"text-white/60",children:"Select a stock to view financials."})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx("div",{className:"flex flex-col gap-6 mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-semibold text-white",children:"Market Holdings"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{size:16,className:"text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-400",children:["Market ",(new Date).toLocaleTimeString()]})]})]})}),e.jsx(d,{segments:h,selectedSegment:a,onSegmentChange:i}),e.jsx(l,{mode:"wait",children:e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:e.jsx(m,{holdings:o,onStockSelect:n})})})]})})]})]})};export{p as default};
//# sourceMappingURL=StockMarket-CJYPTEoB.js.map
