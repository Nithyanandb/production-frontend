import{u as e,a as t,r as o,j as r}from"./index-BbyZfmWP.js";import"./react-BAR5trb5.js";import"./vendor-Cqa_4s5f.js";const s=()=>{const s=e(),{handleOAuthCallback:n}=t();return o.useEffect((()=>{(async()=>{var e;try{const t=new URLSearchParams(window.location.search),o=t.get("token");if(!("true"===t.get("auth_success"))||!o)throw new Error(t.get("message")||"Authentication failed");{const r={token:o,user:{email:t.get("email")||"",name:t.get("name")||"",provider:t.get("provider")||"",roles:(null==(e=t.get("roles"))?void 0:e.split(","))||[]}};if(!r.user.email||!r.user.name)throw new Error("Missing required user data");window.opener?(window.opener.postMessage({type:"AUTH_SUCCESS",data:r},window.location.origin),setTimeout((()=>window.close()),100)):(n(r),s("/"))}}catch(t){const e=t instanceof Error?t.message:"Authentication failed";window.opener?(window.opener.postMessage({type:"AUTH_ERROR",error:e},window.location.origin),window.close()):s(`/login?error=${encodeURIComponent(e)}`)}})()}),[s,n]),r.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-900",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-white",children:"Processing authentication..."}),r.jsx("p",{className:"text-gray-400 mt-2",children:"Please wait while we complete the process..."})]})})};export{s as OAuthCallback,s as default};
//# sourceMappingURL=OAuthCallback-CF2c8NM9.js.map
